<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - SIPRESISI TIK</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-[#EAEABA] flex h-screen overflow-hidden">

    <aside class="w-64 bg-[#1a1a1a] text-white flex flex-col p-6">
        <img src="/image/logo_tik.png" class="w-32 mx-auto mb-10" alt="Logo">
        <nav class="space-y-2 flex-1 overflow-y-auto">
            <a href="/admin/dashboard" class="flex items-center p-3 bg-white text-black rounded-xl font-bold">
                <i class="fas fa-th-large mr-3"></i> Dashboard
            </a>
            <a href="/admin/users" class="flex items-center p-3 hover:bg-gray-800 rounded-xl transition">
                <i class="fas fa-users mr-3"></i> Kelola user
            </a>
            <a href="/admin/types" class="flex items-center p-3 hover:bg-gray-800 rounded-xl transition">
                <i class="fas fa-file-alt mr-3"></i> Kelola Jenis Surat
            </a>
            <a href="/admin/templates" class="flex items-center p-3 hover:bg-gray-800 rounded-xl transition">
                <i class="fas fa-copy mr-3"></i> Kelola Template
            </a>
            <a href="/admin/numbers" class="flex items-center p-3 hover:bg-gray-800 rounded-xl transition">
                <i class="fas fa-hashtag mr-3"></i> Pengaturan Nomor
            </a>
            <a href="/admin/logs" class="flex items-center p-3 hover:bg-gray-800 rounded-xl transition">
                <i class="fas fa-wave-square mr-3"></i> Log Aktivitas
            </a>
            <a href="/admin/archive" class="flex items-center p-3 hover:bg-gray-800 rounded-xl transition">
                <i class="fas fa-archive mr-3"></i> Arsip Surat
            </a>
        </nav>
        <div class="mt-auto pt-4 border-t border-gray-800">
            <a href="/auth/logout" class="flex items-center p-3 text-red-400 hover:bg-red-500 hover:text-white rounded-xl font-bold">
                <i class="fas fa-sign-out-alt mr-3"></i> Logout
            </a>
        </div>
    </aside>

    <main class="flex-1 p-8 overflow-y-auto">
       <header class="sticky top-0 z-30 bg-[#EAEABA] px-8 py-4 -mx-8 border-b border-black/10 shadow-[0_2px_0_rgba(0,0,0,0.12)]">
    <div class="flex justify-end">
        <div class="flex items-center gap-3">
            
            <div class="w-10 h-10 bg-blue-700 rounded-full flex items-center justify-center text-white font-bold text-base shadow-sm">
                P
            </div>

            <div class="flex flex-col justify-center leading-none">
                <span class="font-bold text-sm text-gray-800 leading-normal">
                    <%= user %>
                </span>
                <span class="text-xs text-gray-500 leading-normal">
                    Admin
                </span>
            </div>

        </div>
    </div>
</header>
        <h3 class="text-2xl font-bold mb-8">Dashboard</h3>

        <div class="grid grid-cols-4 gap-6 mb-10">
            <div class="bg-white p-6 rounded-3xl shadow-sm flex justify-between items-center">
                <div><p class="text-gray-500 text-xs font-bold mb-1">Total User</p><h4 class="text-3xl font-bold"><%= stats.totalUser %></h4></div>
                <div class="w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-blue-100"><i class="fas fa-users text-xl"></i></div>
            </div>
            <div class="bg-white p-6 rounded-3xl shadow-sm flex justify-between items-center">
                <div><p class="text-gray-500 text-xs font-bold mb-1">Jenis surat</p><h4 class="text-3xl font-bold"><%= stats.jenisSurat %></h4></div>
                <div class="w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center text-white shadow-lg shadow-green-100"><i class="fas fa-file-alt text-xl"></i></div>
            </div>
            <div class="bg-white p-6 rounded-3xl shadow-sm flex justify-between items-center">
                <div><p class="text-gray-500 text-xs font-bold mb-1">Surat Bulan Ini</p><h4 class="text-3xl font-bold"><%= stats.suratBulanIni %></h4></div>
                <div class="w-12 h-12 bg-purple-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-purple-100"><i class="fas fa-chart-line text-xl"></i></div>
            </div>
            <div class="bg-white p-6 rounded-3xl shadow-sm flex justify-between items-center">
                <div><p class="text-gray-500 text-xs font-bold mb-1">Total Arsip</p><h4 class="text-3xl font-bold"><%= stats.totalArsip %></h4></div>
                <div class="w-12 h-12 bg-orange-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-orange-100"><i class="fas fa-box-archive text-xl"></i></div>
            </div>
        </div>

        <div class="grid grid-cols-2 gap-8">
            <div class="bg-white rounded-[2.5rem] p-8 shadow-sm">
                <div class="flex justify-between items-center mb-6">
                    <h4 class="font-bold">Aktivitas Terbaru</h4>
                    <a href="/admin/logs" class="text-blue-600 text-sm font-bold">Lihat Semua</a>
                </div>
                <div class="space-y-6">
                    <% activities.forEach(act => { %>
                    <div class="flex items-start space-x-4">
                        <div class="w-3 h-3 bg-blue-600 rounded-full mt-1.5"></div>
                        <div>
                            <p class="font-bold text-gray-800 leading-tight"><%= act.full_name %></p>
                            <p class="text-xs text-gray-500 mt-1"><%= act.action %> - <span class="font-bold"><%= act.entity_name %></span></p>
                            <p class="text-[10px] text-gray-400 mt-0.5"><%= new Date(act.created_at).toLocaleString('id-ID') %></p>
                        </div>
                    </div>
                    <% }) %>
                    <% if(activities.length === 0) { %><p class="text-gray-400 italic text-center py-4">Belum ada aktivitas.</p><% } %>
                </div>
            </div>

            <div class="bg-white rounded-[2.5rem] p-8 shadow-sm">
                <div class="flex justify-between items-center mb-6">
                    <h4 class="font-bold">Surat Terbaru</h4>
                    <a href="/admin/archive" class="text-blue-600 text-sm font-bold">Lihat Semua</a>
                </div>
                <div class="space-y-4">
                    <% recentLetters.forEach(letter => { %>
                    <div class="border border-gray-100 rounded-2xl p-4">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-blue-600 font-bold text-[10px] uppercase tracking-wider"><%= letter.letter_number || 'DRAFT' %></span>
                            <span class="bg-green-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-full"><%= letter.status %></span>
                        </div>
                        <h5 class="font-bold text-sm text-gray-800 mb-2"><%= letter.subject %></h5>
                        <div class="flex justify-between text-[10px] text-gray-400">
                            <span><%= letter.type_name %></span>
                            <span><%= new Date(letter.created_at).toLocaleDateString('id-ID') %></span>
                        </div>
                    </div>
                    <% }) %>
                    <% if(recentLetters.length === 0) { %><p class="text-gray-400 italic text-center py-4">Belum ada surat.</p><% } %>
                </div>
            </div>
        </div>
    </main>
</body>
</html>